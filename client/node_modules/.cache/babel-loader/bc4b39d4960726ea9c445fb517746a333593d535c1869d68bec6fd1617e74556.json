{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/user/Desktop/SimplyEx/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/user/Desktop/SimplyEx/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useEffect}from\"react\";import{useNavigate,useParams}from\"react-router-dom\";import{serveUrl}from\"../config\";import{useAppDispatch,useAppSelector}from\"../store/hooks\";import{dispatchOrder}from\"../store/slices/exchange\";var useOrderInfo=function useOrderInfo(){var _useParams=useParams(),orderId=_useParams.orderId;var order=useAppSelector(function(state){return state.exchange.orderInfo;});var dispatch=useAppDispatch();var navigate=useNavigate();var getOrder=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var order;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(serveUrl,\"/order/\").concat(orderId)).then(function(res){return res.json();});case 2:order=_context.sent;if(order.error){navigate('/');}dispatch(dispatchOrder(order));case 5:case\"end\":return _context.stop();}},_callee);}));return function getOrder(){return _ref.apply(this,arguments);};}();var confirmOrder=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"\".concat(serveUrl,\"/confirm/\").concat(orderId),{method:'POST'}).then(function(res){return res.json();});case 3:window.location.reload();_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0.message);case 9:case\"end\":return _context2.stop();}},_callee2,null,[[0,6]]);}));return function confirmOrder(){return _ref2.apply(this,arguments);};}();useEffect(function(){if(!order){getOrder();}},[orderId]);return{orderInfo:order,orderId:orderId,confirmOrder:confirmOrder};};export default useOrderInfo;","map":{"version":3,"names":["useEffect","useNavigate","useParams","serveUrl","useAppDispatch","useAppSelector","dispatchOrder","useOrderInfo","orderId","order","state","exchange","orderInfo","dispatch","navigate","getOrder","fetch","then","res","json","error","confirmOrder","method","window","location","reload","console","message"],"sources":["C:/Users/user/Desktop/SimplyEx/client/src/hooks/useOrderInfo.ts"],"sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport { useNavigate, useParams } from \"react-router-dom\"\r\nimport { serveUrl } from \"../config\"\r\nimport { useAppDispatch, useAppSelector } from \"../store/hooks\"\r\nimport { dispatchOrder } from \"../store/slices/exchange\"\r\n\r\nconst useOrderInfo = () => {\r\n    const { orderId } = useParams()\r\n\r\n    const order = useAppSelector(state => state.exchange.orderInfo)\r\n    const dispatch = useAppDispatch()\r\n    const navigate = useNavigate()\r\n\r\n    const getOrder = async () => {\r\n        const order = await fetch(`${serveUrl}/order/${orderId}`).then(res => res.json())\r\n\r\n        if (order.error) {\r\n            navigate('/')\r\n        }\r\n\r\n        dispatch(dispatchOrder(order))\r\n    }\r\n\r\n    const confirmOrder = async () => {\r\n        try {\r\n            await fetch(`${serveUrl}/confirm/${orderId}`, {\r\n                method: 'POST'\r\n            }).then(res => res.json())\r\n            window.location.reload()\r\n        } catch (error: any) {\r\n            console.error(error.message)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!order) {\r\n            getOrder()\r\n        }\r\n    }, [orderId])\r\n\r\n    return {\r\n        orderInfo: order,\r\n        orderId,\r\n        confirmOrder,\r\n    }\r\n}\r\n\r\nexport default useOrderInfo"],"mappings":"sQAAA,OAASA,SAAS,KAAkB,OAAO,CAC3C,OAASC,WAAW,CAAEC,SAAS,KAAQ,kBAAkB,CACzD,OAASC,QAAQ,KAAQ,WAAW,CACpC,OAASC,cAAc,CAAEC,cAAc,KAAQ,gBAAgB,CAC/D,OAASC,aAAa,KAAQ,0BAA0B,CAExD,GAAMC,aAAY,CAAG,QAAfA,aAAY,EAAS,CACvB,eAAoBL,SAAS,EAAE,CAAvBM,OAAO,YAAPA,OAAO,CAEf,GAAMC,MAAK,CAAGJ,cAAc,CAAC,SAAAK,KAAK,QAAIA,MAAK,CAACC,QAAQ,CAACC,SAAS,GAAC,CAC/D,GAAMC,SAAQ,CAAGT,cAAc,EAAE,CACjC,GAAMU,SAAQ,CAAGb,WAAW,EAAE,CAE9B,GAAMc,SAAQ,4FAAG,oKACOC,MAAK,WAAIb,QAAQ,mBAAUK,OAAO,EAAG,CAACS,IAAI,CAAC,SAAAC,GAAG,QAAIA,IAAG,CAACC,IAAI,EAAE,GAAC,QAA3EV,KAAK,eAEX,GAAIA,KAAK,CAACW,KAAK,CAAE,CACbN,QAAQ,CAAC,GAAG,CAAC,CACjB,CAEAD,QAAQ,CAACP,aAAa,CAACG,KAAK,CAAC,CAAC,sDACjC,kBARKM,SAAQ,0CAQb,CAED,GAAMM,aAAY,6FAAG,iLAEPL,MAAK,WAAIb,QAAQ,qBAAYK,OAAO,EAAI,CAC1Cc,MAAM,CAAE,MACZ,CAAC,CAAC,CAACL,IAAI,CAAC,SAAAC,GAAG,QAAIA,IAAG,CAACC,IAAI,EAAE,GAAC,QAC1BI,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE,mFAExBC,OAAO,CAACN,KAAK,CAAC,aAAMO,OAAO,CAAC,qEAEnC,kBATKN,aAAY,2CASjB,CAEDrB,SAAS,CAAC,UAAM,CACZ,GAAI,CAACS,KAAK,CAAE,CACRM,QAAQ,EAAE,CACd,CACJ,CAAC,CAAE,CAACP,OAAO,CAAC,CAAC,CAEb,MAAO,CACHI,SAAS,CAAEH,KAAK,CAChBD,OAAO,CAAPA,OAAO,CACPa,YAAY,CAAZA,YACJ,CAAC,CACL,CAAC,CAED,cAAed,aAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}