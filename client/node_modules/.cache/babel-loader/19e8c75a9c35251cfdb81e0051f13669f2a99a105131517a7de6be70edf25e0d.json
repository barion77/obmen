{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/user/Desktop/SimplyEx/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/user/Desktop/SimplyEx/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/user/Desktop/SimplyEx/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{serveUrl}from\"../../../../../../../config\";import{useAppSelector}from\"../../../../../../../store/hooks\";var config={fromCurrenycRange:{from:0.0013,to:11},toCurrenycRange:{from:0.0014,to:15}};var getFixedAmount=function getFixedAmount(amount){if(amount.toFixed(7)==='0,0000000'||amount.toFixed(7)==='0.0000000')return'0';return amount.toFixed(7);};var useExchangeRate=function useExchangeRate(){var _useAppSelector=useAppSelector(function(state){return state.exchange;}),fromCurrency=_useAppSelector.fromCurrency,toCurrency=_useAppSelector.toCurrency;var _useState=useState('0.01'),_useState2=_slicedToArray(_useState,2),fromCurrencyAmount=_useState2[0],setFromCurrencyAmount=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),toCurrencyAmount=_useState4[0],setToCurrencyAmount=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isChangeInput=_useState6[0],setIsChangeInput=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isChangeToCurrency=_useState8[0],setIsChangeToCurrency=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isChangeFromCurrency=_useState10[0],setIsChangeFromCurrency=_useState10[1];var getExchangeRate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(toCurrencyAmount,fromCurrencyAmount,isChangeReceiveAmount){var isChange,newForm;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(!isChangeInput||!toCurrency.shortName||!fromCurrency.shortName)){_context.next=2;break;}return _context.abrupt(\"return\");case 2:isChange=isChangeReceiveAmount?'True':'false';_context.next=5;return fetch(\"\".concat(serveUrl,\"/calculator/\").concat(fromCurrency.shortName,\"/\").concat(toCurrency.shortName,\"/\").concat(fromCurrencyAmount||'0.001',\"/\").concat(toCurrencyAmount||'0.001',\"/\").concat(isChange),{method:'POST'}).then(function(res){return res.json();});case 5:newForm=_context.sent;if(isChangeReceiveAmount){setFromCurrencyAmount(getFixedAmount(newForm.amount));}else{setToCurrencyAmount(getFixedAmount(newForm.amount));}setIsChangeInput(false);case 8:case\"end\":return _context.stop();}},_callee);}));return function getExchangeRate(_x,_x2,_x3){return _ref.apply(this,arguments);};}();useEffect(function(){getExchangeRate(toCurrencyAmount,fromCurrencyAmount,false);},[fromCurrencyAmount,isChangeFromCurrency]);useEffect(function(){getExchangeRate(toCurrencyAmount,fromCurrencyAmount,true);},[toCurrencyAmount,isChangeToCurrency]);useEffect(function(){setIsChangeInput(true);setIsChangeFromCurrency(function(prev){return!prev;});},[fromCurrency]);useEffect(function(){setIsChangeInput(true);setIsChangeToCurrency(function(prev){return!prev;});},[toCurrency]);var changeFromAmount=function changeFromAmount(amount){if(Number(amount)<=config.fromCurrenycRange.to&&Number(amount)>=config.fromCurrenycRange.from){setFromCurrencyAmount(amount);}else{setFromCurrencyAmount(\"\".concat(config.fromCurrenycRange.from));}};var changeToAmount=function changeToAmount(amount){if(Number(amount)<=config.toCurrenycRange.to&&Number(amount)>=config.toCurrenycRange.from){setFromCurrencyAmount(amount);}else{setFromCurrencyAmount(\"\".concat(config.toCurrenycRange.from));}};return{exchangeRate:config,fromCurrencyAmount:fromCurrencyAmount,toCurrencyAmount:toCurrencyAmount,setFromCurrencyAmount:changeFromAmount,setToCurrencyAmount:changeToAmount,setIsChangeInput:setIsChangeInput};};export default useExchangeRate;","map":{"version":3,"names":["useEffect","useState","serveUrl","useAppSelector","config","fromCurrenycRange","from","to","toCurrenycRange","getFixedAmount","amount","toFixed","useExchangeRate","state","exchange","fromCurrency","toCurrency","fromCurrencyAmount","setFromCurrencyAmount","toCurrencyAmount","setToCurrencyAmount","isChangeInput","setIsChangeInput","isChangeToCurrency","setIsChangeToCurrency","isChangeFromCurrency","setIsChangeFromCurrency","getExchangeRate","isChangeReceiveAmount","shortName","isChange","fetch","method","then","res","json","newForm","prev","changeFromAmount","Number","changeToAmount","exchangeRate"],"sources":["C:/Users/user/Desktop/SimplyEx/client/src/screens/home/components/exchange/components/form/hooks/useExchangeRate.ts"],"sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport { serveUrl } from \"../../../../../../../config\"\r\nimport { useAppSelector } from \"../../../../../../../store/hooks\"\r\n\r\nconst config = {\r\n    fromCurrenycRange: {\r\n        from: 0.0013,\r\n        to: 11\r\n    },\r\n    toCurrenycRange: {\r\n        from: 0.0014,\r\n        to: 15\r\n    },\r\n}\r\n\r\nconst getFixedAmount = (amount: number) => {\r\n    if (amount.toFixed(7) === '0,0000000' || amount.toFixed(7) === '0.0000000') return '0'\r\n    return amount.toFixed(7)\r\n}\r\n\r\nconst useExchangeRate = () => {\r\n    const {\r\n        fromCurrency,\r\n        toCurrency\r\n    } = useAppSelector(state => state.exchange)\r\n\r\n    const [fromCurrencyAmount, setFromCurrencyAmount] = useState('0.01')\r\n    const [toCurrencyAmount, setToCurrencyAmount] = useState('')\r\n    const [isChangeInput, setIsChangeInput] = useState(true)\r\n    const [isChangeToCurrency, setIsChangeToCurrency] = useState(false)\r\n    const [isChangeFromCurrency, setIsChangeFromCurrency] = useState(false)\r\n\r\n    const getExchangeRate = async (toCurrencyAmount: string, fromCurrencyAmount: string, isChangeReceiveAmount: boolean) => {\r\n        if (!isChangeInput || !toCurrency.shortName || !fromCurrency.shortName) return\r\n\r\n        const isChange = isChangeReceiveAmount ? 'True' : 'false'\r\n        const newForm = await fetch(`${serveUrl}/calculator/${fromCurrency.shortName}/${toCurrency.shortName}/${fromCurrencyAmount || '0.001'}/${toCurrencyAmount || '0.001'}/${isChange}`, {\r\n            method: 'POST',\r\n        }).then(res => res.json())\r\n\r\n        if (isChangeReceiveAmount) {\r\n            setFromCurrencyAmount(getFixedAmount(newForm.amount))\r\n        } else {\r\n            setToCurrencyAmount(getFixedAmount(newForm.amount))\r\n        }\r\n        setIsChangeInput(false)\r\n    }\r\n\r\n    useEffect(() => {\r\n        getExchangeRate(toCurrencyAmount, fromCurrencyAmount, false)\r\n    }, [fromCurrencyAmount, isChangeFromCurrency])\r\n\r\n    useEffect(() => {\r\n        getExchangeRate(toCurrencyAmount, fromCurrencyAmount, true)\r\n    }, [toCurrencyAmount, isChangeToCurrency])\r\n\r\n    useEffect(() => {\r\n        setIsChangeInput(true)\r\n        setIsChangeFromCurrency(prev => !prev)\r\n    }, [fromCurrency])\r\n\r\n    useEffect(() => {\r\n        setIsChangeInput(true)\r\n        setIsChangeToCurrency(prev => !prev)\r\n    }, [toCurrency])\r\n\r\n    const changeFromAmount = (amount: string) => {\r\n        if (Number(amount) <= config.fromCurrenycRange.to && Number(amount) >= config.fromCurrenycRange.from) {\r\n            setFromCurrencyAmount(amount)\r\n        } else {\r\n            setFromCurrencyAmount(`${config.fromCurrenycRange.from}`)\r\n        }\r\n    }\r\n\r\n    const changeToAmount = (amount: string) => {\r\n        if (Number(amount) <= config.toCurrenycRange.to && Number(amount) >= config.toCurrenycRange.from) {\r\n            setFromCurrencyAmount(amount)\r\n        } else {\r\n            setFromCurrencyAmount(`${config.toCurrenycRange.from}`)\r\n        }\r\n    }\r\n\r\n    return {\r\n        exchangeRate: config,\r\n        fromCurrencyAmount,\r\n        toCurrencyAmount,\r\n        setFromCurrencyAmount: changeFromAmount,\r\n        setToCurrencyAmount: changeToAmount,\r\n        setIsChangeInput\r\n    }\r\n}\r\n\r\nexport default useExchangeRate"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}